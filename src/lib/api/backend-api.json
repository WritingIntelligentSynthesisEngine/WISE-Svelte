{
  "components": {
    "schemas": {
      "AccountOutSchema": {
        "description": "账户信息输出",
        "properties": {
          "date_joined": {
            "format": "date-time",
            "title": "Date Joined",
            "type": "string"
          },
          "email": {
            "title": "Email",
            "type": "string"
          },
          "is_active": {
            "title": "Is Active",
            "type": "boolean"
          },
          "is_staff": {
            "title": "Is Staff",
            "type": "boolean"
          },
          "is_superuser": {
            "title": "Is Superuser",
            "type": "boolean"
          },
          "last_login": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login"
          },
          "profile_image_path": {
            "title": "Profile Image Path",
            "type": "string"
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": ["last_login", "is_superuser", "username", "email", "is_staff", "is_active", "date_joined", "profile_image_path"],
        "title": "AccountOutSchema",
        "type": "object"
      },
      "AccountUpdateInSchema": {
        "description": "更新账户信息时输入",
        "properties": {
          "api_key": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Api Key"
          },
          "username": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Username"
          }
        },
        "title": "AccountUpdateInSchema",
        "type": "object"
      },
      "BookCreateInSchema": {
        "description": "创建书籍时的输入",
        "properties": {
          "attributes": {
            "additionalProperties": true,
            "default": {},
            "title": "Attributes",
            "type": "object"
          },
          "category_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category Id"
          },
          "description": {
            "default": "无",
            "title": "Description",
            "type": "string"
          },
          "settings": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "title": {
            "title": "Title",
            "type": "string"
          }
        },
        "required": ["title"],
        "title": "BookCreateInSchema",
        "type": "object"
      },
      "BookOutSchema": {
        "description": "完整书籍的输出",
        "properties": {
          "attributes": {
            "additionalProperties": true,
            "title": "Attributes",
            "type": "object"
          },
          "category_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category Id"
          },
          "cover_image_path": {
            "title": "Cover Image Path",
            "type": "string"
          },
          "create_time": {
            "format": "date-time",
            "title": "Create Time",
            "type": "string"
          },
          "description": {
            "title": "Description",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "settings": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "update_time": {
            "format": "date-time",
            "title": "Update Time",
            "type": "string"
          }
        },
        "required": ["id", "title", "description", "cover_image_path", "create_time", "update_time", "status", "attributes"],
        "title": "BookOutSchema",
        "type": "object"
      },
      "BookUpdateInSchema": {
        "description": "更新书籍时的输入",
        "properties": {
          "attributes": {
            "anyOf": [
              {
                "additionalProperties": true,
                "type": "object"
              },
              {
                "type": "null"
              }
            ],
            "title": "Attributes"
          },
          "category_id": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Category Id"
          },
          "description": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Description"
          },
          "settings": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Settings"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "title": "BookUpdateInSchema",
        "type": "object"
      },
      "ChapterCreateInSchema": {
        "description": "创建章节时的输入",
        "properties": {
          "chapter_number": {
            "title": "Chapter Number",
            "type": "integer"
          },
          "content": {
            "default": [],
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Content",
            "type": "array"
          },
          "outline": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Outline"
          },
          "title": {
            "title": "Title",
            "type": "string"
          }
        },
        "required": ["chapter_number", "title"],
        "title": "ChapterCreateInSchema",
        "type": "object"
      },
      "ChapterOutSchema": {
        "description": "完整章节的输出",
        "properties": {
          "book_id": {
            "title": "Book Id",
            "type": "integer"
          },
          "chapter_number": {
            "title": "Chapter Number",
            "type": "integer"
          },
          "content": {
            "items": {
              "additionalProperties": true,
              "type": "object"
            },
            "title": "Content",
            "type": "array"
          },
          "create_time": {
            "format": "date-time",
            "title": "Create Time",
            "type": "string"
          },
          "id": {
            "title": "Id",
            "type": "integer"
          },
          "outline": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Outline"
          },
          "status": {
            "title": "Status",
            "type": "string"
          },
          "title": {
            "title": "Title",
            "type": "string"
          },
          "update_time": {
            "format": "date-time",
            "title": "Update Time",
            "type": "string"
          }
        },
        "required": ["id", "book_id", "chapter_number", "title", "content", "create_time", "update_time", "status"],
        "title": "ChapterOutSchema",
        "type": "object"
      },
      "ChapterUpdateInSchema": {
        "description": "更新章节时的输入",
        "properties": {
          "chapter_number": {
            "anyOf": [
              {
                "type": "integer"
              },
              {
                "type": "null"
              }
            ],
            "title": "Chapter Number"
          },
          "content": {
            "anyOf": [
              {
                "items": {
                  "additionalProperties": true,
                  "type": "object"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "title": "Content"
          },
          "outline": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Outline"
          },
          "title": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Title"
          }
        },
        "title": "ChapterUpdateInSchema",
        "type": "object"
      },
      "EmailRequestInSchema": {
        "description": "邮箱验证时输入",
        "properties": {
          "email": {
            "format": "email",
            "title": "Email",
            "type": "string"
          }
        },
        "required": ["email"],
        "title": "EmailRequestInSchema",
        "type": "object"
      },
      "ErrorDetailSchema": {
        "description": "错误详情",
        "properties": {
          "field": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误字段",
            "title": "Field"
          },
          "message": {
            "description": "错误信息",
            "title": "Message",
            "type": "string"
          }
        },
        "required": ["message"],
        "title": "ErrorDetailSchema",
        "type": "object"
      },
      "GenerateOutlineInSchema": {
        "description": "生成大纲时的输入",
        "properties": {
          "book_id": {
            "title": "Book Id",
            "type": "integer"
          },
          "chapter_number": {
            "title": "Chapter Number",
            "type": "integer"
          },
          "context_size": {
            "default": 3,
            "title": "Context Size",
            "type": "integer"
          }
        },
        "required": ["book_id", "chapter_number"],
        "title": "GenerateOutlineInSchema",
        "type": "object"
      },
      "JwtOutSchema": {
        "description": "JWT 输出",
        "properties": {
          "access": {
            "title": "Access",
            "type": "string"
          },
          "refresh": {
            "title": "Refresh",
            "type": "string"
          }
        },
        "required": ["access", "refresh"],
        "title": "JwtOutSchema",
        "type": "object"
      },
      "LoginInSchema": {
        "description": "登录账户时输入",
        "properties": {
          "password": {
            "title": "Password",
            "type": "string"
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": ["username", "password"],
        "title": "LoginInSchema",
        "type": "object"
      },
      "OutSchema_AccountOutSchema_": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/AccountOutSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[AccountOutSchema]",
        "type": "object"
      },
      "OutSchema_BookOutSchema_": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/BookOutSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[BookOutSchema]",
        "type": "object"
      },
      "OutSchema_ChapterOutSchema_": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/ChapterOutSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[ChapterOutSchema]",
        "type": "object"
      },
      "OutSchema_JwtOutSchema_": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/JwtOutSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[JwtOutSchema]",
        "type": "object"
      },
      "OutSchema_List_AccountOutSchema__": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/AccountOutSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据",
            "title": "Data"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[List[AccountOutSchema]]",
        "type": "object"
      },
      "OutSchema_List_BookOutSchema__": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/BookOutSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据",
            "title": "Data"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[List[BookOutSchema]]",
        "type": "object"
      },
      "OutSchema_List_ChapterOutSchema__": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ChapterOutSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据",
            "title": "Data"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[List[ChapterOutSchema]]",
        "type": "object"
      },
      "OutSchema_NoneType_": {
        "properties": {
          "data": {
            "description": "响应数据",
            "title": "Data",
            "type": "null"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[NoneType]",
        "type": "object"
      },
      "OutSchema_SensitiveAccountOutSchema_": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "$ref": "#/components/schemas/SensitiveAccountOutSchema"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[SensitiveAccountOutSchema]",
        "type": "object"
      },
      "OutSchema_str_": {
        "properties": {
          "data": {
            "anyOf": [
              {
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "description": "响应数据",
            "title": "Data"
          },
          "errors": {
            "anyOf": [
              {
                "items": {
                  "$ref": "#/components/schemas/ErrorDetailSchema"
                },
                "type": "array"
              },
              {
                "type": "null"
              }
            ],
            "description": "错误详情",
            "title": "Errors"
          },
          "message": {
            "default": "success",
            "description": "消息",
            "title": "Message",
            "type": "string"
          },
          "timestamp": {
            "description": "时间戳",
            "format": "date-time",
            "title": "Timestamp",
            "type": "string"
          }
        },
        "title": "OutSchema[str]",
        "type": "object"
      },
      "PasswordResetConfirmInSchema": {
        "description": "确认重置密码时输入",
        "properties": {
          "password": {
            "title": "Password",
            "type": "string"
          },
          "password_confirm": {
            "title": "Password Confirm",
            "type": "string"
          }
        },
        "required": ["password", "password_confirm"],
        "title": "PasswordResetConfirmInSchema",
        "type": "object"
      },
      "RegisterInSchema": {
        "description": "注册账户时输入",
        "properties": {
          "email": {
            "format": "email",
            "title": "Email",
            "type": "string"
          },
          "password": {
            "title": "Password",
            "type": "string"
          },
          "password_confirm": {
            "title": "Password Confirm",
            "type": "string"
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": ["username", "email", "password", "password_confirm"],
        "title": "RegisterInSchema",
        "type": "object"
      },
      "SensitiveAccountOutSchema": {
        "description": "敏感账户信息输出",
        "properties": {
          "api_key": {
            "title": "Api Key",
            "type": "string"
          },
          "balance": {
            "pattern": "^(?!^[-+.]*$)[+-]?0*\\d*\\.?\\d*$",
            "title": "Balance",
            "type": "string"
          },
          "date_joined": {
            "format": "date-time",
            "title": "Date Joined",
            "type": "string"
          },
          "email": {
            "title": "Email",
            "type": "string"
          },
          "is_active": {
            "title": "Is Active",
            "type": "boolean"
          },
          "is_staff": {
            "title": "Is Staff",
            "type": "boolean"
          },
          "is_superuser": {
            "title": "Is Superuser",
            "type": "boolean"
          },
          "last_login": {
            "anyOf": [
              {
                "format": "date-time",
                "type": "string"
              },
              {
                "type": "null"
              }
            ],
            "title": "Last Login"
          },
          "profile_image_path": {
            "title": "Profile Image Path",
            "type": "string"
          },
          "username": {
            "title": "Username",
            "type": "string"
          }
        },
        "required": ["last_login", "is_superuser", "username", "email", "is_staff", "is_active", "date_joined", "profile_image_path", "balance", "api_key"],
        "title": "SensitiveAccountOutSchema",
        "type": "object"
      }
    },
    "securitySchemes": {
      "OptionalAuth": {
        "scheme": "bearer",
        "type": "http"
      }
    }
  },
  "info": {
    "description": "",
    "title": "NinjaExtraAPI",
    "version": "1.0.0"
  },
  "openapi": "3.1.0",
  "paths": {
    "/api/account-verifications": {
      "post": {
        "description": "请求验证账户",
        "operationId": "account_endpoints_account_verify_request",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailRequestInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_str_"
                }
              }
            },
            "description": "Created"
          }
        },
        "summary": "请求验证账户",
        "tags": ["账户"]
      }
    },
    "/api/account-verifications/{uidb64}/{token}": {
      "put": {
        "description": "使用令牌验证账户",
        "operationId": "account_endpoints_account_verify_confirm",
        "parameters": [
          {
            "in": "path",
            "name": "uidb64",
            "required": true,
            "schema": {
              "title": "Uidb64",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "token",
            "required": true,
            "schema": {
              "title": "Token",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_AccountOutSchema_"
                }
              }
            },
            "description": "OK"
          }
        },
        "summary": "使用令牌验证账户",
        "tags": ["账户"]
      }
    },
    "/api/accounts": {
      "get": {
        "description": "获取账户信息列表, 支持分页",
        "operationId": "account_endpoints_get_accounts",
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "default": 1,
              "title": "Page",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page_size",
            "required": false,
            "schema": {
              "default": 20,
              "title": "Page Size",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_List_AccountOutSchema__"
                }
              }
            },
            "description": "OK"
          }
        },
        "summary": "获取账户信息列表",
        "tags": ["账户"]
      },
      "post": {
        "description": "注册账户, 如果用户已存在但未激活, 则更新用户信息",
        "operationId": "account_endpoints_register",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/RegisterInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_AccountOutSchema_"
                }
              }
            },
            "description": "Created"
          }
        },
        "summary": "注册账户",
        "tags": ["账户"]
      }
    },
    "/api/accounts/me": {
      "get": {
        "description": "获取当前账户信息, 会输出敏感信息",
        "operationId": "account_endpoints_get_my_account",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_SensitiveAccountOutSchema_"
                }
              }
            },
            "description": "OK"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "获取当前账户信息",
        "tags": ["账户"]
      },
      "patch": {
        "description": "更新当前账户信息",
        "operationId": "account_endpoints_update_my_account",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/AccountUpdateInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_SensitiveAccountOutSchema_"
                }
              }
            },
            "description": "OK"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Bad Request"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "更新当前账户信息",
        "tags": ["账户"]
      }
    },
    "/api/accounts/other/{username}": {
      "get": {
        "description": "获取特定账户信息, 不会输出敏感信息",
        "operationId": "account_endpoints_get_account",
        "parameters": [
          {
            "in": "path",
            "name": "username",
            "required": true,
            "schema": {
              "title": "Username",
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_AccountOutSchema_"
                }
              }
            },
            "description": "OK"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "summary": "获取账户信息",
        "tags": ["账户"]
      }
    },
    "/api/aitools/generate-outline-tool": {
      "post": {
        "description": "生成书籍大纲(流式)",
        "operationId": "ai_endpoints_generate_outline",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/GenerateOutlineInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "title": "Response"
                }
              }
            },
            "description": "Created"
          },
          "400": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Bad Request"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          },
          "500": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Internal Server Error"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "生成书籍大纲",
        "tags": ["AI"]
      }
    },
    "/api/books": {
      "get": {
        "description": "获取书籍列表, 支持过滤和分页",
        "operationId": "book_endpoints_get_books",
        "parameters": [
          {
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "default": 1,
              "title": "Page",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page_size",
            "required": false,
            "schema": {
              "default": 20,
              "title": "Page Size",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "category_id",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "integer"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Category Id"
            }
          },
          {
            "in": "query",
            "name": "status",
            "required": false,
            "schema": {
              "anyOf": [
                {
                  "type": "string"
                },
                {
                  "type": "null"
                }
              ],
              "title": "Status"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_List_BookOutSchema__"
                }
              }
            },
            "description": "OK"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "获取书籍列表",
        "tags": ["书籍与文章"]
      },
      "post": {
        "description": "创建书籍, 如果有封面则保存在媒体目录, 并且创建用户与书籍的作者关系",
        "operationId": "book_endpoints_create_book",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BookCreateInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_BookOutSchema_"
                }
              }
            },
            "description": "Created"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "创建书籍",
        "tags": ["书籍与文章"]
      }
    },
    "/api/books/{book_id}": {
      "delete": {
        "description": "删除书籍接口, 要求用户必须是书籍的主创或管理员才能删除",
        "operationId": "book_endpoints_delete_book",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "204": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "No Content"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "删除书籍",
        "tags": ["书籍与文章"]
      },
      "get": {
        "description": "获取特定书籍",
        "operationId": "book_endpoints_get_book",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_BookOutSchema_"
                }
              }
            },
            "description": "OK"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "获取书籍",
        "tags": ["书籍与文章"]
      },
      "patch": {
        "description": "更新书籍",
        "operationId": "book_endpoints_update_book",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/BookUpdateInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_BookOutSchema_"
                }
              }
            },
            "description": "OK"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "更新书籍",
        "tags": ["书籍与文章"]
      }
    },
    "/api/books/{book_id}/chapters": {
      "get": {
        "description": "获取书籍的章节列表",
        "operationId": "book_endpoints_get_chapters",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page",
            "required": false,
            "schema": {
              "default": 1,
              "title": "Page",
              "type": "integer"
            }
          },
          {
            "in": "query",
            "name": "page_size",
            "required": false,
            "schema": {
              "default": 20,
              "title": "Page Size",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_List_ChapterOutSchema__"
                }
              }
            },
            "description": "OK"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "获取章节列表",
        "tags": ["书籍与文章"]
      },
      "post": {
        "description": "创建新章节",
        "operationId": "book_endpoints_create_chapter",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChapterCreateInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_ChapterOutSchema_"
                }
              }
            },
            "description": "Created"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "创建章节",
        "tags": ["书籍与文章"]
      }
    },
    "/api/books/{book_id}/chapters/{chapter_number}": {
      "delete": {
        "description": "删除章节",
        "operationId": "book_endpoints_delete_chapter",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "chapter_number",
            "required": true,
            "schema": {
              "title": "Chapter Number",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "204": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "No Content"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "删除章节",
        "tags": ["书籍与文章"]
      },
      "get": {
        "description": "获取特定章节",
        "operationId": "book_endpoints_get_chapter",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "chapter_number",
            "required": true,
            "schema": {
              "title": "Chapter Number",
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_ChapterOutSchema_"
                }
              }
            },
            "description": "OK"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "获取章节",
        "tags": ["书籍与文章"]
      },
      "patch": {
        "description": "更新章节信息",
        "operationId": "book_endpoints_update_chapter",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          },
          {
            "in": "path",
            "name": "chapter_number",
            "required": true,
            "schema": {
              "title": "Chapter Number",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ChapterUpdateInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_ChapterOutSchema_"
                }
              }
            },
            "description": "OK"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "更新章节",
        "tags": ["书籍与文章"]
      }
    },
    "/api/books/{book_id}/cover": {
      "patch": {
        "description": "更新书籍封面",
        "operationId": "book_endpoints_upload_cover_image",
        "parameters": [
          {
            "in": "path",
            "name": "book_id",
            "required": true,
            "schema": {
              "title": "Book Id",
              "type": "integer"
            }
          }
        ],
        "requestBody": {
          "content": {
            "multipart/form-data": {
              "schema": {
                "properties": {
                  "cover_image": {
                    "format": "binary",
                    "title": "Cover Image",
                    "type": "string"
                  }
                },
                "title": "FileParams",
                "type": "object"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_BookOutSchema_"
                }
              }
            },
            "description": "OK"
          },
          "403": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Forbidden"
          },
          "404": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_NoneType_"
                }
              }
            },
            "description": "Not Found"
          }
        },
        "security": [
          {
            "OptionalAuth": []
          }
        ],
        "summary": "更新封面图片",
        "tags": ["书籍与文章"]
      }
    },
    "/api/password-resets": {
      "post": {
        "description": "请求重置密码",
        "operationId": "account_endpoints_password_reset_request",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EmailRequestInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_str_"
                }
              }
            },
            "description": "Created"
          }
        },
        "summary": "请求重置密码",
        "tags": ["账户"]
      }
    },
    "/api/password-resets/{uidb64}/{token}": {
      "put": {
        "description": "使用令牌重置密码",
        "operationId": "account_endpoints_password_reset_confirm",
        "parameters": [
          {
            "in": "path",
            "name": "uidb64",
            "required": true,
            "schema": {
              "title": "Uidb64",
              "type": "string"
            }
          },
          {
            "in": "path",
            "name": "token",
            "required": true,
            "schema": {
              "title": "Token",
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/PasswordResetConfirmInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_str_"
                }
              }
            },
            "description": "OK"
          }
        },
        "summary": "使用令牌重置密码",
        "tags": ["账户"]
      }
    },
    "/api/sessions": {
      "post": {
        "description": "登录账户",
        "operationId": "account_endpoints_login",
        "parameters": [],
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginInSchema"
              }
            }
          },
          "required": true
        },
        "responses": {
          "201": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_JwtOutSchema_"
                }
              }
            },
            "description": "Created"
          }
        },
        "summary": "登录账户",
        "tags": ["账户"]
      }
    },
    "/api/status": {
      "get": {
        "description": "用于连通测试和基础状态检查，返回服务基本状态信息。",
        "operationId": "core_endpoints_get_status",
        "parameters": [],
        "responses": {
          "200": {
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/OutSchema_str_"
                }
              }
            },
            "description": "OK"
          }
        },
        "summary": "获取服务状态信息",
        "tags": ["核心"]
      }
    }
  },
  "servers": []
}
